<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Coordenadas em Tempo Real</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h1 {
      font-size: 48pt;
    }

    .box {
      margin-top: 15px;
      padding: 10px;
      border: 6px solid #ccc;
      border-radius: 6px;
      font-size: 64pt;
    }
    
    .label {
      font-weight: bold;
    }

    .btn-copy {
      margin-top: 12px;
      padding: 10px 18px;
      font-size: 32pt;
      font-weight: bold;
      color: white;
      background: linear-gradient(135deg, #2d89ff, #1b5fcc);
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    .btn-copy:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }

    .btn-copy:active {
      transform: scale(0.98);
      box-shadow: 0 3px 6px rgba(0,0,0,0.2);
    }

    .copy-status {
      margin-top: 6px;
      font-size: 32px;
      color: #2d89ff;
      font-weight: 500;
    }
  </style>
</head>
  <body>

    <h1>Localização em Tempo Real</h1>

    <div class="box">
      <div><span class="label">Data:</span> <span id="date">-</span></div>
      <div><span class="label">Hora:</span> <span id="time">-</span></div>
    </div>

    <div id="coords" class="box">
      <b>Latitude:</b> <span id="lat">-</span><br>
      <b>Longitude:</b> <span id="lon">-</span><br>
      <br><hr><br>
      <b>Precisão:</b> <span id="acc">-</span> metros<br>
      <br><hr><br>
      <button onclick="copiarCoordenadas()" class="btn-copy">Copiar</button>
      <div id="copyStatus" class="copy-status"></div>
    </div>

    <script>
      function copiarCoordenadas() {
        const lat = document.getElementById("lat").textContent;
        const lon = document.getElementById("lon").textContent;

        if (lat === "-" || lon === "-") {
          document.getElementById("copyStatus").textContent =
            "Coordenadas ainda não disponíveis.";
          return;
        }

        const texto = lat + ", " + lon;

        navigator.clipboard.writeText(texto)
          .then(() => {
            document.getElementById("copyStatus").textContent =
              "Coordenadas copiadas! ✅";
          })
          .catch(err => {
            document.getElementById("copyStatus").textContent =
              "Erro ao copiar.";
            console.error("Erro ao copiar:", err);
          });
      }

      function updateClock() {
        const now = new Date();
        document.getElementById("date").textContent = now.toLocaleDateString("pt-BR");
        document.getElementById("time").textContent =
        now.toLocaleTimeString("pt-BR", {
          hour: "2-digit",
          minute: "2-digit"
        });
      }

      setInterval(updateClock, 60000);
      updateClock();

      if (!navigator.geolocation) {
        alert("Geolocalização não é suportada neste navegador.");
      } else {
        navigator.geolocation.watchPosition(
          function(position) {
            document.getElementById("lat").textContent = position.coords.latitude.toFixed(6);
            document.getElementById("lon").textContent = position.coords.longitude.toFixed(6);
            document.getElementById("acc").textContent = position.coords.accuracy.toFixed(1); 
          },
          function(error) {
            let msg = "Erro ao obter localização.";
            switch (error.code) {
              case error.PERMISSION_DENIED:
                msg = "Permissão de localização negada.";
                break;
              case error.POSITION_UNAVAILABLE:
                msg = "Localização indisponível.";
                break;
              case error.TIMEOUT:
                msg = "Tempo esgotado ao obter localização.";
                break;
            }
            alert(msg);
          },
          {
            enableHighAccuracy: true,
            maximumAge: 1000,   // aceita cache de até 1s
            timeout: 10000
          }
        );
      }
    </script>

  </body>
</html>