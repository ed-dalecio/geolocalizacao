<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Coordenadas em Tempo Real</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: #f4f6f8;
      padding: 20px;
      color: #1a1a1a;
    }

    .box {
      margin-top: 12px;
      padding: 12px;
      background-color: white;
      border-radius: 6px;
      border: 1px solid #e0e0e0;
    }

    .label {
      font-weight: 600;
      font-size: 14px;
      color: #555;
    }

    #lat, #lon, #acc {
      font-size: 18px;
      font-weight: 600;
    }

    .btn-copy {
      margin-top: 14px;
      width: 100%;
      padding: 12px;
      font-size: 16px;
      font-weight: 600;
      background-color: #2f3b52;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .btn-copy:active {
      background-color: #1f2937;
    }

    .copy-status {
      margin-top: 8px;
      font-size: 13px;
      color: #2f3b52;
    }
  </style>
</head>
  <body>

    <h1>Localização em Tempo Real</h1>

    <div class="box">
      <div><span class="label">Data:</span> <span id="date">-</span></div>
      <div><span class="label">Hora:</span> <span id="time">-</span></div>
    </div>

    <div id="coords" class="box">
      <b>Latitude:</b> <span id="lat">-</span><br>
      <b>Longitude:</b> <span id="lon">-</span><br>
      <br><hr><br>
      <b>Precisão:</b> <span id="acc">-</span> metros<br>
      <br><hr><br>
      <button onclick="copiarCoordenadas()" class="btn-copy">Copiar</button>
      <div id="copyStatus" class="copy-status"></div>
    </div>

    <script>
      function copiarCoordenadas() {
        const lat = document.getElementById("lat").textContent;
        const lon = document.getElementById("lon").textContent;

        if (lat === "-" || lon === "-") {
          document.getElementById("copyStatus").textContent =
            "Coordenadas ainda não disponíveis.";
          return;
        }

        const texto = lat + ", " + lon;

        navigator.clipboard.writeText(texto)
          .then(() => {
            document.getElementById("copyStatus").textContent =
              "Coordenadas copiadas! ✅";
          })
          .catch(err => {
            document.getElementById("copyStatus").textContent =
              "Erro ao copiar.";
            console.error("Erro ao copiar:", err);
          });
      }

      function updateClock() {
        const now = new Date();
        document.getElementById("date").textContent = now.toLocaleDateString("pt-BR");
        document.getElementById("time").textContent =
        now.toLocaleTimeString("pt-BR", {
          hour: "2-digit",
          minute: "2-digit"
        });
      }

      setInterval(updateClock, 60000);
      updateClock();

      if (!navigator.geolocation) {
        alert("Geolocalização não é suportada neste navegador.");
      } else {
        navigator.geolocation.watchPosition(
          function(position) {
            document.getElementById("lat").textContent = position.coords.latitude.toFixed(6);
            document.getElementById("lon").textContent = position.coords.longitude.toFixed(6);
            document.getElementById("acc").textContent = position.coords.accuracy.toFixed(1); 
          },
          function(error) {
            let msg = "Erro ao obter localização.";
            switch (error.code) {
              case error.PERMISSION_DENIED:
                msg = "Permissão de localização negada.";
                break;
              case error.POSITION_UNAVAILABLE:
                msg = "Localização indisponível.";
                break;
              case error.TIMEOUT:
                msg = "Tempo esgotado ao obter localização.";
                break;
            }
            alert(msg);
          },
          {
            enableHighAccuracy: true,
            maximumAge: 1000,   // aceita cache de até 1s
            timeout: 10000
          }
        );
      }
    </script>

  </body>
</html>
